/*!
 * Chart.bands.js
 * Version: v0.4.0-rc
 *
 * Copyright 2016 BBC
 * Released under the MIT license
 * https://github.com/BBC/Chart.bands.js/blob/master/LICENSE.md
 */
!function o(r,e,t){function a(l,i){if(!e[l]){if(!r[l]){var s="function"==typeof require&&require;if(!i&&s)return s(l,!0);if(n)return n(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var f=e[l]={exports:{}};r[l][0].call(f.exports,function(o){var e=r[l][1][o];return a(e?e:o)},f,f.exports,o,r,e,t)}return e[l].exports}for(var n="function"==typeof require&&require,l=0;l<t.length;l++)a(t[l]);return a}({1:[function(o,r,e){},{}],2:[function(o,r,e){function t(o,r,e,t){var l=r.getPixelForValue(t.yValue),i=t.bandLine;if("dashed"===i.type)for(var s=e.start;s<e.stop;s+=6)a(o,l,s,s+4,i.stroke,i.colour);else a(o,l,e.start,e.stop,i.stroke,i.colour);void 0!==i.label&&i.label.length>0&&n(o,i,{x:e.start,y:e.top-2*t.bandLine.fontSize})}function a(o,r,e,t,a,n){o.beginPath(),o.moveTo(e,r),o.lineTo(t,r),o.lineWidth=a,o.strokeStyle=n,o.stroke()}function n(o,r,e){if(o.font=f.fontString(r.fontSize,r.fontStyle,r.fontFamily),o.fillStyle=r.colour,o.fillText(r.label,e.x,e.y),"dashed"===r.type)for(var t=10;t<e.x-10;t+=6)a(o,e.y+.5*r.fontSize,t,t+4,r.stroke,r.colour);else a(o,e.y,10,e.x-10,r.stroke,r.colour)}function l(o){return"object"==typeof o.color&&o.color.length>0&&"number"==typeof o.yValue}function i(o,r,e,t,a,n,l){for(var i=["red","green","blue"],s=[],c=0;c<l.length;c++){var f=l[c],u=i[c],d=r.getPixelForValue(f.from),h=r.getPixelForValue(f.to),g=1-d/e,p=1-h/e;s.push({pos:g,colour:u}),s.push({pos:p,colour:u})}window.stops=s;var b=!1;try{for(var v=o.createLinearGradient(0,e,0,0),c=0;c<s.length;c++){var y=s[c];v.addColorStop(y.pos,y.colour)}v.addColorStop(1,t)}catch(C){console.warn("ConfigError: Chart.Bands.js had a problem applying one or more colors please check that you have selected valid color strings"),b=!0}return b?t:v}function s(o){return u[o]?void(g=u[o]):(console.warn("Warning: The Chart.Bands.js plugin is not supported with chart type "+o),void(h=!1))}var c,f,u,d,h,g,p;c=o("Chart"),c="function"==typeof c?c:window.Chart,f=c.helpers,h=!0,g="borderColor",baseColor=[],u={bubble:"backgroundColor",line:"borderColor"},d={borderColor:"backgroundColor",backgroundColor:"borderColor"},c.Bands=c.Bands||{},p=c.Bands.defaults={bands:{from:0,to:0,yValue:!1,bandLine:{stroke:.01,colour:"rgba(0, 0, 0, 1.000)",type:"solid",label:"",fontSize:"12",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontStyle:"normal"},color:["rgba(0, 255, 0, 1.000)"]}};var b=c.PluginBase.extend({beforeInit:function(o){s(o.config.type);for(var r=0;r<o.chart.config.data.datasets.length;r++)baseColor[r]=o.chart.config.data.datasets[r][g]},afterScaleUpdate:function(o){var r,e,t;if(h!==!1){r=o.chart.ctx.canvas;for(var a=o.options.bands.length-1;a>=0;a--){var n=o.options.bands[a];if(e=f.configMerge(c.Bands.defaults.bands,n),l(e))for(var s=0;s<o.chart.config.data.datasets.length;s++)t=i(r.getContext("2d"),o.scales["y-axis-0"],o.chart.height,baseColor[s],e.color[s],e.yValue,o.options.bands),o.chart.config.data.datasets[s][g]=t;else console.warn("ConfigError: The Chart.Bands.js config seems incorrect")}}},afterDraw:function(o){var r,e;if(h!==!1){r=o.chart.ctx.canvas;for(var a=o.options.bands.length-1;a>=0;a--){var n=o.options.bands[a];e=f.configMerge(c.Bands.defaults.bands,n),"number"==typeof e.yValue?t(r.getContext("2d"),o.scales["y-axis-0"],{top:o.chartArea.top,start:o.chartArea.left,stop:o.chartArea.right},e):console.warn("ConfigError: The Chart.Bands.js plugin config requires a yValue")}}}});c.pluginService.register(new b)},{Chart:1}]},{},[2]);