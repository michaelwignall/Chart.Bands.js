/*!
 * Chart.bands.js
 * Version: v0.4.0-rc
 *
 * Copyright 2016 BBC
 * Released under the MIT license
 * https://github.com/BBC/Chart.bands.js/blob/master/LICENSE.md
 */
!function o(r,e,t){function a(i,s){if(!e[i]){if(!r[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(n)return n(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var f=e[i]={exports:{}};r[i][0].call(f.exports,function(o){var e=r[i][1][o];return a(e?e:o)},f,f.exports,o,r,e,t)}return e[i].exports}for(var n="function"==typeof require&&require,i=0;i<t.length;i++)a(t[i]);return a}({1:[function(o,r,e){},{}],2:[function(o,r,e){function t(o,r,e,t,a){return!1}function a(o,r,e,t){var a=r.getPixelForValue(t.yValue),s=t.bandLine;if("dashed"===s.type)for(var l=e.start;l<e.stop;l+=6)n(o,a,l,l+4,s.stroke,s.colour);else n(o,a,e.start,e.stop,s.stroke,s.colour);void 0!==s.label&&s.label.length>0&&i(o,s,{x:e.start,y:e.top-2*t.bandLine.fontSize})}function n(o,r,e,t,a,n){o.beginPath(),o.moveTo(e,r),o.lineTo(t,r),o.lineWidth=a,o.strokeStyle=n,o.stroke()}function i(o,r,e){if(o.font=u.fontString(r.fontSize,r.fontStyle,r.fontFamily),o.fillStyle=r.colour,o.fillText(r.label,e.x,e.y),"dashed"===r.type)for(var t=10;t<e.x-10;t+=6)n(o,e.y+.5*r.fontSize,t,t+4,r.stroke,r.colour);else n(o,e.y,10,e.x-10,r.stroke,r.colour)}function s(o){return"string"==typeof o.color}function l(o,r,e,t,a){for(var n=[],i=0;i<a.length;i++){var l=a[i],c=u.configMerge(f.Bands.defaults.bands,l);if(!s(c))return void console.warn("ConfigError: The Chart.Bands.js config seems incorrect");var d=r.getPixelForValue(l.from),g=r.getPixelForValue(l.to),h=1-d/e,p=1-g/e;n.push({pos:h,colour:c.color}),n.push({pos:p,colour:c.color})}window.stops=n;var b=!1;try{for(var v=o.createLinearGradient(0,e,0,0),i=0;i<n.length;i++){var y=n[i];v.addColorStop(y.pos,y.colour)}v.addColorStop(1,t)}catch(C){console.warn("ConfigError: Chart.Bands.js had a problem applying one or more colors please check that you have selected valid color strings"),b=!0}return b?t:v}function c(o){return d[o]?void(p=d[o]):(console.warn("Warning: The Chart.Bands.js plugin is not supported with chart type "+o),void(h=!1))}var f,u,d,g,h,p,b;f=o("Chart"),f="function"==typeof f?f:window.Chart,u=f.helpers,h=!0,p="borderColor",baseColor=[],d={bubble:"backgroundColor",line:"borderColor"},g={borderColor:"backgroundColor",backgroundColor:"borderColor"},f.Bands=f.Bands||{},b=f.Bands.defaults={bands:{from:0,to:0,yValue:!1,backgroundColor:"transparent",bandLine:{stroke:.01,colour:"rgba(0, 0, 0, 1.000)",type:"solid",label:"",fontSize:"12",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontStyle:"normal"},color:["rgba(0, 255, 0, 1.000)"]}};var v=f.PluginBase.extend({beforeInit:function(o){c(o.config.type);for(var r=0;r<o.chart.config.data.datasets.length;r++)baseColor[r]=o.chart.config.data.datasets[r][p]},afterScaleUpdate:function(o){var r,e;if(h!==!1){r=o.chart.ctx.canvas;for(var t=0;t<o.chart.config.data.datasets.length;t++)e=l(r.getContext("2d"),o.scales["y-axis-0"],o.chart.height,baseColor[t],o.options.bands),o.chart.config.data.datasets[t][p]=e}},beforeDraw:function(o){var r,e;if(h!==!1){r=o.chart.ctx.canvas;for(var n=o.options.bands.length-1;n>=0;n--){var i=o.options.bands[n];e=u.configMerge(f.Bands.defaults.bands,i),"string"==typeof e.backgroundColor&&t(r.getContext("2d"),o,o.scales["y-axis-0"],o.scales["x-axis-0"],e),"number"==typeof e.yValue?a(r.getContext("2d"),o.scales["y-axis-0"],{top:o.chartArea.top,start:o.chartArea.left,stop:o.chartArea.right},e):console.warn("ConfigError: The Chart.Bands.js plugin config requires a yValue")}}}});f.pluginService.register(new v)},{Chart:1}]},{},[2]);