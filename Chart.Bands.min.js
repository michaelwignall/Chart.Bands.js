/*!
 * Chart.bands.js
 * Version: v0.4.0-rc
 *
 * Copyright 2016 BBC
 * Released under the MIT license
 * https://github.com/BBC/Chart.bands.js/blob/master/LICENSE.md
 */
!function o(r,e,t){function a(i,l){if(!e[i]){if(!r[i]){var s="function"==typeof require&&require;if(!l&&s)return s(i,!0);if(n)return n(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var f=e[i]={exports:{}};r[i][0].call(f.exports,function(o){var e=r[i][1][o];return a(e?e:o)},f,f.exports,o,r,e,t)}return e[i].exports}for(var n="function"==typeof require&&require,i=0;i<t.length;i++)a(t[i]);return a}({1:[function(o,r,e){},{}],2:[function(o,r,e){function t(o,r,e,t){var i=r.getPixelForValue(t.yValue),l=t.bandLine;if("dashed"===l.type)for(var s=e.start;s<e.stop;s+=6)a(o,i,s,s+4,l.stroke,l.colour);else a(o,i,e.start,e.stop,l.stroke,l.colour);void 0!==l.label&&l.label.length>0&&n(o,l,{x:e.start,y:e.top-2*t.bandLine.fontSize})}function a(o,r,e,t,a,n){o.beginPath(),o.moveTo(e,r),o.lineTo(t,r),o.lineWidth=a,o.strokeStyle=n,o.stroke()}function n(o,r,e){if(o.font=f.fontString(r.fontSize,r.fontStyle,r.fontFamily),o.fillStyle=r.colour,o.fillText(r.label,e.x,e.y),"dashed"===r.type)for(var t=10;t<e.x-10;t+=6)a(o,e.y+.5*r.fontSize,t,t+4,r.stroke,r.colour);else a(o,e.y,10,e.x-10,r.stroke,r.colour)}function i(o){return"string"==typeof o.color}function l(o,r,e,t,a){for(var n=[],l=0;l<a.length;l++){var s=a[l],u=f.configMerge(c.Bands.defaults.bands,s);if(!i(u))return void console.warn("ConfigError: The Chart.Bands.js config seems incorrect");var d=r.getPixelForValue(s.from),h=r.getPixelForValue(s.to),g=1-d/e,p=1-h/e;n.push({pos:g,colour:u.color}),n.push({pos:p,colour:u.color})}window.stops=n;var v=!1;try{for(var b=o.createLinearGradient(0,e,0,0),l=0;l<n.length;l++){var y=n[l];b.addColorStop(y.pos,y.colour)}b.addColorStop(1,t)}catch(C){console.warn("ConfigError: Chart.Bands.js had a problem applying one or more colors please check that you have selected valid color strings"),v=!0}return v?t:b}function s(o){return u[o]?void(g=u[o]):(console.warn("Warning: The Chart.Bands.js plugin is not supported with chart type "+o),void(h=!1))}var c,f,u,d,h,g,p;c=o("Chart"),c="function"==typeof c?c:window.Chart,f=c.helpers,h=!0,g="borderColor",baseColor=[],u={bubble:"backgroundColor",line:"borderColor"},d={borderColor:"backgroundColor",backgroundColor:"borderColor"},c.Bands=c.Bands||{},p=c.Bands.defaults={bands:{from:0,to:0,yValue:!1,bandLine:{stroke:.01,colour:"rgba(0, 0, 0, 1.000)",type:"solid",label:"",fontSize:"12",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontStyle:"normal"},color:["rgba(0, 255, 0, 1.000)"]}};var v=c.PluginBase.extend({beforeInit:function(o){s(o.config.type);for(var r=0;r<o.chart.config.data.datasets.length;r++)baseColor[r]=o.chart.config.data.datasets[r][g]},afterScaleUpdate:function(o){var r,e;if(h!==!1){r=o.chart.ctx.canvas;for(var t=0;t<o.chart.config.data.datasets.length;t++)e=l(r.getContext("2d"),o.scales["y-axis-0"],o.chart.height,baseColor[t],o.options.bands),o.chart.config.data.datasets[t][g]=e}},afterDraw:function(o){var r,e;if(h!==!1){r=o.chart.ctx.canvas;for(var a=o.options.bands.length-1;a>=0;a--){var n=o.options.bands[a];e=f.configMerge(c.Bands.defaults.bands,n),"number"==typeof e.yValue?t(r.getContext("2d"),o.scales["y-axis-0"],{top:o.chartArea.top,start:o.chartArea.left,stop:o.chartArea.right},e):console.warn("ConfigError: The Chart.Bands.js plugin config requires a yValue")}}}});c.pluginService.register(new v)},{Chart:1}]},{},[2]);